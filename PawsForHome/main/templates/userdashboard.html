{% extends "index.html" %}

{% url 'main:user_dashboard' as user_dashboard_url %}
{% url 'main:ud_requests' as ud_requests_url %}
{% url 'main:ud_favorites' as ud_favorites_url %}
{% url 'main:ud_adoptionhistory' as ud_adoptionhistory_url %}


{% block contents %}

    {% load static %}
    <link rel="stylesheet" href="{% static "css/user-dashboard.css" %}">
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <div class="main">
        <div class="side-bar">
            {% comment %} ang silbeg profile nimo {% endcomment %}
            <center>
                <div>
                    <img src="{% static "images/shelterlogo.png" %}" alt="test">
                    <h2>{{ curr_fn }}</h2>
                </div>
            </center>

            <div class="side-items">
                <div class="item {% if request.resolver_match.url_name == 'user_dashboard' %}active{% endif %}">
                    <a href="{% url "main:user_dashboard" %}">
                        Overview
                    </a>
                </div>
                <div class="item {% if request.resolver_match.url_name == 'ud_requests' %}active{% endif %}">
                    <a href="{% url "main:ud_requests" %}">
                        Requests
                    </a>
                </div>
                <div class="item {% if request.resolver_match.url_name == 'ud_favorites' %}active{% endif %}">
                    <a href="{% url "main:ud_favorites" %}">
                        Favorites
                    </a>
                </div>
                <div class="item {% if request.resolver_match.url_name == 'ud_adoptionhistory' %}active{% endif %}">
                    <a href="{% url "main:ud_adoptionhistory" %}">
                        Adoption History
                    </a>
                </div>
            </div>

        </div>
        <div class="side-bar-contents">
            {% block u_dash_content %}
            <div class="content for-overview">
                    {% block ud_name %}{% endblock ud_name %}
                    
                    <section class="overview-stats">

                        <div class="overview">
                            <center>
                                <img src="{% static "images/guinea-pig 1.png" %}" alt="Request Pets">
                                <h3>Request Pets</h3>
                                <p class="count">{{request_count}}</p>
                            </center>
                        </div>
                        <div class="overview">
                            <center>
                                <img src="{% static "images/catshelterboardpic.png" %}" alt="Favorite Pets">
                                <h3>Favorite Pets</h3>
                                <p class="count">{{fave_count}}</p>
                            </center>
                        </div>
                        <div class="overview">
                            <center>
                                <img src="{% static "images/shelterboardpic3.png" %}" alt="Pets Owned">
                                <h3>Pets Owned</h3>
                                <p class="count">{{own_pet_count}}</p>
                            </center>
                        </div>

                    </section>

                    <section class="pets-owned">
                        <h3>Pets Owned:</h3>
                        <div class="pet-own-list">
                            {% if own_pet %}
                                {% for op in own_pet %}
    
                                        <div class="pet">
                                            <img src="{{ op.image.url }}" alt="{{ op.name }}" class="pet-image">
                                            <div class="pet-info">
                                                <h3 class="pet-name">{{ op.name }}</h3>
                                                <p class="pet-age">
                                                    {% if op.age_years > 0 %}
                                                        {{ op.age_years }} years{% if op.age_months > 0 %} and {{ op.age_months }} months{% endif %} old
                                                    {% else %}
                                                        {{ op.age_months }} months old
                                                    {% endif %}
                                                </p>
                                                <span class="pet-type">{{ op.type }}</span>
                                            </div>
                                        </div> 
                                        
                                {% endfor %}
                            {% else %}    
                                <p class="empty-overview">No pets owned.</p>
                            {% endif %}
                        </div>
                    </section>

                </div>
            {% endblock u_dash_content %}
        </div>
    </div>
{% endblock contents %}