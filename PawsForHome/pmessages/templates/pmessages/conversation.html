

{% extends "index.html" %}

{% block contents %}
<script src="https://cdn.tailwindcss.com"></script>
{% load static %}
<link rel="stylesheet" href="{% static 'css/landing_page.css' %}">

<div class="flex flex-col justify-between mx-auto mt-10 rounded-xl shadow-md" style="width: 400px; height: 260px;">

    <header class="bg-[#F2968F] text-white p-2 flex items-center justify-between rounded-t-xl">
        <div class="flex items-center">
            <button onclick="window.history.back()" class="text-white font-bold text-lg mr-2">
                &#8592;
            </button>
            <h2 class="text-lg font-semibold">{{ receiver.first_name }} {{ receiver.last_name }}</h2>
        </div>
    </header>

    <div class="flex-grow p-2 space-y-2 overflow-y-auto bg-gray-100" style="height: 150px;">

        {% for message in messages %}
            {% if message.sender == request.user %}
                <div class="flex justify-end items-center space-x-2">
                    <small class="text-gray-500">{{ message.timestamp|date:"M d, Y H:i" }}</small>
                    <div class="bg-gray-300 p-2 rounded-lg text-black max-w-xs">
                        {{ message.content }}
                    </div>
                </div>
            {% else %}
                <div class="flex items-center space-x-2">
                    <div class="bg-[#F2968F] p-2 rounded-lg text-white max-w-xs">
                        {{ message.content }}
                    </div>
                    <small class="text-gray-500">{{ message.timestamp|date:"M d, Y H:i" }}</small>
                </div>
            {% endif %}
        {% endfor %}


    </div>
    <form method="POST" class="bg-white p-2 border-t border-gray-200 flex items-center space-x-2 rounded-b-xl">
        {% csrf_token %}
        <input type="text" name="content" placeholder="Type message..." required 
            class="flex-grow p-1 border rounded-full border-gray-300 focus:outline-none focus:ring focus:border-blue-300">
        <button type="submit" class="bg-[#F2968F] hover:bg-red-400 text-white font-semibold p-1 px-3 rounded-full">
            Send
        </button>
    </form>
</div>

{% endblock contents %}